@import "tailwindcss";
@import "tw-animate-css";
@import "shadcn/tailwind.css";

@custom-variant dark (&:is(.dark *));

/*
 * ============================================================================
 * @theme inline - Maps CSS variables to Tailwind utilities
 * ============================================================================
 *
 * This section enables Tailwind utility classes from CSS custom properties.
 * Example: --color-primary → enables bg-primary, text-primary, border-primary
 * See :root and .dark sections below for actual color values and usage docs.
 *
 */
@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-sans);
  --font-mono: var(--font-geist-mono);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);

  /* Focus ring colors */
  --color-focus: var(--focus-ring-color);
  --color-focus-offset: var(--focus-ring-color);

  /* Success colors (positive indicators, correct feedback) */
  --color-success: var(--success);
  --color-success-muted: var(--success-muted);

  /* Highlight colors (current user row, "this is you" indicators) */
  --color-highlight: var(--highlight);

  /* Placement badge colors (leaderboard) */
  --color-placement-gold: var(--placement-gold);
  --color-placement-gold-foreground: var(--placement-gold-foreground);
  --color-placement-silver: var(--placement-silver);
  --color-placement-silver-foreground: var(--placement-silver-foreground);
  --color-placement-bronze: var(--placement-bronze);
  --color-placement-bronze-foreground: var(--placement-bronze-foreground);

  /* Shadows (elevated surfaces) */
  --shadow-dialog: var(--shadow-dialog);
}

/*
 * ============================================================================
 * SEMANTIC COLOR SYSTEM - LIGHT MODE
 * ============================================================================
 *
 * Pattern: Each color has a background + foreground pair for proper contrast.
 * Format: OKLCH (Lightness Chroma Hue) - perceptually uniform color space
 *
 */
:root {
  /* ===== BASE COLORS ===== */
  /* Used by: body, main containers */
  --background: oklch(1 0 0);              /* White - main page background */
  --foreground: oklch(0.145 0 0);          /* Near-black - main text color, link buttons */

  /* ===== CARD COLORS ===== */
  /* Used by: Card component */
  --card: oklch(1 0 0);                    /* White - card backgrounds */
  --card-foreground: oklch(0.145 0 0);     /* Near-black - text on cards */

  /* ===== POPOVER COLORS ===== */
  /* Used by: Popover, Dropdown, Select content, Combobox dropdown */
  --popover: oklch(1 0 0);                 /* White - dropdown/popover background */
  --popover-foreground: oklch(0.145 0 0);  /* Near-black - text in dropdowns */

  /* ===== PRIMARY COLORS (Yellow) ===== */
  /* Used by: Default button background, default button hover, default button text */
  --primary: oklch(0.852 0.199 91.936);         /* Light yellow - primary button bg */
  --primary-foreground: oklch(0.145 0 0);       /* Near-black - text on primary button */

  /* ===== SECONDARY COLORS (Purple/Gray) ===== */
  /* Used by: Secondary button */
  --secondary: oklch(0.967 0.001 286.375);      /* Light purple-gray - secondary button bg */
  --secondary-foreground: oklch(0.21 0.006 285.885); /* Dark purple-gray - secondary button text */

  /* ===== MUTED COLORS ===== */
  /* Used by: Ghost button hover, Input placeholder text */
  --muted: oklch(0.97 0 0);                /* Very light gray - subtle backgrounds */
  --muted-foreground: oklch(0.556 0 0);    /* Medium gray - placeholder text, less important text */

  /* ===== ACCENT COLORS ===== */
  /* Used by: Outline button hover, Select items on hover/focus, Dropdown items on hover/focus */
  --accent: oklch(0.97 0 0);               /* Very light gray - hover state background */
  --accent-foreground: oklch(0.205 0 0);   /* Very dark gray - text on accent background */

  /* ===== DESTRUCTIVE COLORS (Red) ===== */
  /* Used by: Destructive button, destructive dropdown items, error focus rings, form validation error borders */
  --destructive: oklch(0.58 0.22 27);           /* Dark red - destructive button bg, error borders */
  --destructive-foreground: oklch(1 0 0);       /* White - text on destructive background */

  /* ===== SUCCESS COLORS (Green) ===== */
  /*
   * Used by: Positive indicators, correct answer feedback, delta increases
   * Colors match Tailwind emerald for consistency:
   * - success: emerald-600 (#059669) - text/icons on light backgrounds
   * - success-muted: green-500 at 20% opacity - overlay backgrounds
   */
  --success: oklch(0.596 0.145 163.225);        /* Tailwind emerald-600 - positive text */
  --success-muted: oklch(0.723 0.191 142.303 / 20%); /* Tailwind green-500 at 20% - overlay bg */

  /* ===== HIGHLIGHT COLORS ===== */
  /*
   * Used by: Current user row highlighting in tables, "this is you" indicators
   * Uses primary color at low opacity for brand consistency
   * - highlight: primary at 5% opacity - subtle row background
   */
  --highlight: oklch(0.852 0.199 91.936 / 5%);  /* Primary yellow at 5% - subtle highlight bg */

  /* ===== BORDER & INPUT COLORS ===== */
  /* Used by: All borders, Input backgrounds */
  --border: oklch(0.922 0 0);              /* Light gray - borders on buttons, inputs, cards */
  --input: oklch(0.922 0 0);               /* Light gray - input backgrounds (used at 30% opacity) */

  /* ===== RING COLOR ===== */
  /* UNUSED - kept for shadcn compatibility */
  --ring: oklch(0.708 0 0);                /* Medium gray - NOT USED (we use custom focus-ring-color) */

  /* ===== CHART COLORS ===== */
  /* Used by: Chart components (if you use them) */
  --chart-1: oklch(0.905 0.182 98.111);    /* Lightest yellow - chart color 1 */
  --chart-2: oklch(0.795 0.184 86.047);    /* Light yellow - chart color 2 */
  --chart-3: oklch(0.681 0.162 75.834);    /* Medium yellow - chart color 3 */
  --chart-4: oklch(0.554 0.135 66.442);    /* Darker yellow - chart color 4 */
  --chart-5: oklch(0.476 0.114 61.907);    /* Darkest yellow - chart color 5 */

  /* ===== BORDER RADIUS ===== */
  --radius: 0.625rem;                      /* Base radius - 10px (components use rounded-4xl = radius + 16px) */

  /* ===== SHADOWS ===== */
  /*
   * Layered shadow system for elevated surfaces (dialogs, modals, popovers)
   * Per Figma design specifications:
   * - First layer: 1px inset border at 4% opacity
   * - Additional layers: Soft depth shadows at varying distances
   */
  --shadow-dialog: 0px 0px 0px 1px rgba(51,51,51,0.04),
                   0px 1px 1px 0.5px rgba(51,51,51,0.04),
                   0px 3px 3px -1.5px rgba(51,51,51,0.02),
                   0px 6px 6px -3px rgba(51,51,51,0.04),
                   0px 12px 12px -6px rgba(51,51,51,0.04),
                   0px 24px 24px -12px rgba(51,51,51,0.04),
                   0px 48px 48px -24px rgba(51,51,51,0.04);

  /* ===== SIDEBAR COLORS ===== */
  /* Used by: Sidebar component (if you use it) */
  --sidebar: oklch(0.985 0 0);                        /* Very light gray - sidebar background */
  --sidebar-foreground: oklch(0.145 0 0);             /* Near-black - sidebar text */
  --sidebar-primary: oklch(0.681 0.162 75.834);       /* Medium yellow - active sidebar item */
  --sidebar-primary-foreground: oklch(0.987 0.026 102.212); /* Very light - text on active item */
  --sidebar-accent: oklch(0.97 0 0);                  /* Light gray - sidebar hover state */
  --sidebar-accent-foreground: oklch(0.205 0 0);      /* Dark gray - text on hover */
  --sidebar-border: oklch(0.922 0 0);                 /* Light gray - sidebar borders */
  --sidebar-ring: oklch(0.708 0 0);                   /* Medium gray - sidebar focus ring */

  /* ===== CUSTOM INTERACTIVE COLORS ===== */
  /*
   * Focus ring system
   * Used by: ALL interactive elements on keyboard focus (buttons, inputs, links, etc.)
   * Blue outline (2px) with 2px offset for accessibility.
   * Also used by: Link button text color (text-focus)
   */
  --focus-ring-color: oklch(0.5 0.25 252);  /* Blue - focus outlines & link button text */
  --focus-ring-width: 2px;
  --focus-ring-offset: 2px;

  /*
   * Hover state colors (Custom semantic tokens for darker shades)
   * Used by: Button hover states to create darker versions on interaction
   */
  --primary-hover: oklch(0.82 0.195 91.936);      /* Darker yellow - default button hover */
  --primary-dark: oklch(0.7 0.195 91.936);        /* UNUSED - was for links, now using focus color */
  --secondary-hover: oklch(0.93 0.001 286.375);   /* Darker purple-gray - secondary button hover */
  --destructive-hover: oklch(0.54 0.21 27);       /* Darker red - destructive button hover */

  /* ===== PLACEMENT BADGE COLORS ===== */
  /*
   * Used by: LeaderboardTable rank badges for top 3 positions
   * Colors match Figma design specifications using Tailwind color equivalents:
   * - Gold: Tailwind yellow-400 (#facc15)
   * - Silver: Tailwind sky-200 (#bae6fd)
   * - Bronze: Tailwind amber-600 (#d97706)
   * Foreground uses --primary-foreground for consistency with primary button text
   */
  --placement-gold: oklch(0.852 0.199 91.936);    /* Tailwind yellow-400 - 1st place */
  --placement-gold-foreground: var(--primary-foreground);
  --placement-silver: oklch(0.901 0.058 230.902); /* Tailwind sky-200 - 2nd place */
  --placement-silver-foreground: var(--primary-foreground);
  --placement-bronze: oklch(0.666 0.179 58.318);  /* Tailwind amber-600 - 3rd place */
  --placement-bronze-foreground: var(--primary-foreground);
}

/*
 * ============================================================================
 * SEMANTIC COLOR SYSTEM - DARK MODE
 * ============================================================================
 *
 * Same semantic token names, different values for dark backgrounds.
 * Lightness values are inverted: backgrounds are darker, text is lighter.
 *
 */
.dark {
  /* ===== BASE COLORS ===== */
  --background: oklch(0.145 0 0);              /* Very dark gray - main dark background */
  --foreground: oklch(0.985 0 0);              /* Very light - main text on dark bg */

  /* ===== CARD COLORS ===== */
  --card: oklch(0.205 0 0);                    /* Dark gray - card backgrounds */
  --card-foreground: oklch(0.985 0 0);         /* Very light - text on cards */

  /* ===== POPOVER COLORS ===== */
  --popover: oklch(0.205 0 0);                 /* Dark gray - dropdown/popover background */
  --popover-foreground: oklch(0.985 0 0);      /* Very light - text in dropdowns */

  /* ===== PRIMARY COLORS (Yellow) ===== */
  --primary: oklch(0.795 0.184 86.047);             /* Lighter yellow for dark mode */
  --primary-foreground: oklch(0.145 0 0);           /* Near-black - text on primary button */

  /* ===== SECONDARY COLORS (Purple/Gray) ===== */
  --secondary: oklch(0.274 0.006 286.033);     /* Dark purple-gray */
  --secondary-foreground: oklch(0.985 0 0);    /* Very light - secondary button text */

  /* ===== MUTED COLORS ===== */
  /* Used by: Ghost button hover, Input placeholder text */
  --muted: oklch(0.269 0 0);                   /* Dark gray - subtle backgrounds */
  --muted-foreground: oklch(0.708 0 0);        /* Light gray - placeholder text */

  /* ===== ACCENT COLORS ===== */
  --accent: oklch(0.371 0 0);                  /* Medium-dark gray - hover backgrounds */
  --accent-foreground: oklch(0.985 0 0);       /* Very light - text on accent */

  /* ===== DESTRUCTIVE COLORS (Red) ===== */
  /* Used by: Destructive button, destructive dropdown items, error focus rings, form validation error borders */
  --destructive: oklch(0.58 0.22 27);          /* Dark red - destructive button bg, error borders (same as light mode) */
  --destructive-foreground: oklch(1 0 0);      /* White - text on destructive background */

  /* ===== SUCCESS COLORS (Green) ===== */
  /*
   * Lighter green for dark mode visibility
   * - success: emerald-400 (#34d399) - brighter for dark backgrounds
   * - success-muted: green-400 at 20% opacity - overlay backgrounds
   */
  --success: oklch(0.765 0.177 163.223);       /* Tailwind emerald-400 - positive text */
  --success-muted: oklch(0.792 0.209 151.711 / 20%); /* Tailwind green-400 at 20% - overlay bg */

  /* ===== HIGHLIGHT COLORS ===== */
  /*
   * Uses dark mode primary at slightly higher opacity for visibility on dark backgrounds
   */
  --highlight: oklch(0.795 0.184 86.047 / 8%); /* Primary yellow at 8% - subtle highlight bg */

  /* ===== BORDER & INPUT COLORS ===== */
  --border: oklch(1 0 0 / 10%);                /* White at 10% opacity - subtle borders */
  --input: oklch(1 0 0 / 15%);                 /* White at 15% opacity - input backgrounds */

  /* ===== RING COLOR ===== */
  --ring: oklch(0.556 0 0);                    /* UNUSED - kept for shadcn compatibility */

  /* ===== PLACEMENT BADGE COLORS ===== */
  /* Same as light mode - Tailwind colors work well on dark backgrounds */
  --placement-gold: oklch(0.852 0.199 91.936);    /* Tailwind yellow-400 */
  --placement-gold-foreground: var(--primary-foreground);
  --placement-silver: oklch(0.901 0.058 230.902); /* Tailwind sky-200 */
  --placement-silver-foreground: var(--primary-foreground);
  --placement-bronze: oklch(0.666 0.179 58.318);  /* Tailwind amber-600 */
  --placement-bronze-foreground: var(--primary-foreground);

  /* ===== CHART COLORS ===== */
  /* Same as light mode - chart colors work in both themes */
  --chart-1: oklch(0.905 0.182 98.111);
  --chart-2: oklch(0.795 0.184 86.047);
  --chart-3: oklch(0.681 0.162 75.834);
  --chart-4: oklch(0.554 0.135 66.442);
  --chart-5: oklch(0.476 0.114 61.907);

  /* ===== SIDEBAR COLORS ===== */
  --sidebar: oklch(0.205 0 0);                        /* Dark gray - sidebar background */
  --sidebar-foreground: oklch(0.985 0 0);             /* Very light - sidebar text */
  --sidebar-primary: oklch(0.795 0.184 86.047);       /* Lighter yellow - active item */
  --sidebar-primary-foreground: oklch(0.987 0.026 102.212); /* Very light - text on active */
  --sidebar-accent: oklch(0.269 0 0);                 /* Dark gray - sidebar hover */
  --sidebar-accent-foreground: oklch(0.985 0 0);      /* Very light - text on hover */
  --sidebar-border: oklch(1 0 0 / 10%);               /* White at 10% - sidebar borders */
  --sidebar-ring: oklch(0.556 0 0);                   /* Medium gray - sidebar focus ring */

  /* ===== SHADOWS (Dark Mode) ===== */
  /*
   * Dark mode shadow uses white with low opacity for glow effect on dark backgrounds
   * First layer: 1px border at 8% white opacity (more visible than light mode)
   */
  --shadow-dialog: 0px 0px 0px 1px rgba(255,255,255,0.08),
                   0px 1px 1px 0.5px rgba(0,0,0,0.2),
                   0px 3px 3px -1.5px rgba(0,0,0,0.15),
                   0px 6px 6px -3px rgba(0,0,0,0.2),
                   0px 12px 12px -6px rgba(0,0,0,0.2),
                   0px 24px 24px -12px rgba(0,0,0,0.2),
                   0px 48px 48px -24px rgba(0,0,0,0.2);

  /* ===== CUSTOM INTERACTIVE COLORS (Dark Mode) ===== */
  /* Lighter blue for better visibility on dark backgrounds */
  --focus-ring-color: oklch(0.6 0.25 252);       /* Lighter blue - focus outlines & link text */

  /* Hover states adjusted for dark mode */
  --primary-hover: oklch(0.76 0.18 86.047);      /* Slightly darker yellow on hover */
  --primary-dark: oklch(0.72 0.18 86.047);       /* UNUSED - was for links */
  --secondary-hover: oklch(0.32 0.008 286.033);  /* Lighter purple-gray - secondary button hover */
  --destructive-hover: oklch(0.54 0.21 27);      /* Darker red - destructive button hover (same as light mode) */
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/*
 * ============================================================================
 * FOCUS RING SYSTEM
 * ============================================================================
 *
 * Automatically applies blue outline to ALL interactive elements on focus.
 * Error/destructive states get red outline instead.
 *
 * To customize: Change CSS variables in :root above
 * To disable on specific element: Add class "focus-ring-none"
 * Works with any component library (shadcn, Base UI, etc.)
 *
 * ============================================================================
 */
:is(button, input, textarea, select, a):focus-visible,
:is([role="button"], [role="tab"], [role="option"], [role="menuitem"]):focus-visible,
:is([role="checkbox"], [role="radio"], [role="switch"], [role="combobox"]):focus-visible,
:is([tabindex]:not([tabindex="-1"])):focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
}

/* Red outline for errors/destructive actions */
:is(button, input, textarea, select)[aria-invalid="true"]:focus-visible,
:is(button, input, textarea, select)[data-invalid]:focus-visible,
button.destructive:focus-visible,
:is(button, [role="button"])[data-variant="destructive"]:focus-visible {
  outline-color: var(--destructive);
}

/*
 * ============================================================================
 * FORM VALIDATION ERROR STATES
 * ============================================================================
 *
 * Error state pattern for form components:
 * 1. Red border: aria-invalid:border-destructive
 * 2. Red focus ring: Applied automatically via aria-invalid:focus-visible above
 *
 * Components using this pattern:
 * - Input (components/ui/input.tsx)
 * - Textarea (components/ui/textarea.tsx)
 * - Select trigger (components/ui/select.tsx)
 * - InputGroup container (components/ui/input-group.tsx)
 * - ComboboxChips container (components/ui/combobox.tsx)
 *
 * For container components (InputGroup, ComboboxChips):
 * - Use focus-within:outline-[var(--focus-ring-color)] for normal state
 * - Use aria-invalid:focus-within:outline-[var(--destructive)] for error state
 * - Why focus-within? Container div doesn't receive focus, child input does
 *
 * ============================================================================
 */

@layer utilities {
  /*
   * Dashed separator pattern (4px dash, 4px gap per Figma)
   *
   * Used by: Separator component variant="dashed"
   * @see Figma node 2582:6142 (Settings Dialog)
   *
   * Uses repeating linear gradient for precise dash control while
   * respecting theme colors via var(--border).
   *
   * Why gradient instead of border-dashed?
   * CSS border-dashed doesn't allow custom dash/gap sizes.
   *
   * Why gradient instead of SVG data URI?
   * SVG data URIs require hardcoded colors. Gradients use CSS variables,
   * so the separator automatically respects light/dark theme changes.
   */
  .separator-dashed-horizontal {
    height: 1px;
    width: 100%;
    background: repeating-linear-gradient(
      to right,
      var(--border) 0,
      var(--border) 4px,
      transparent 4px,
      transparent 8px
    );
  }

  .separator-dashed-vertical {
    width: 1px;
    height: 100%;
    background: repeating-linear-gradient(
      to bottom,
      var(--border) 0,
      var(--border) 4px,
      transparent 4px,
      transparent 8px
    );
  }

  /* Manual focus ring (rarely needed) */
  .focus-ring:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
  }

  /* Force destructive focus ring */
  .focus-ring-destructive:focus-visible {
    outline: var(--focus-ring-width) solid var(--destructive);
    outline-offset: var(--focus-ring-offset);
  }

  /* Disable focus ring (use sparingly!) */
  .focus-ring-none:focus-visible {
    outline: none !important;
  }

  /* Hide scrollbar while preserving scroll functionality */
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /*
   * Focus ring for container components (InputGroup, ComboboxChips)
   * Use when a container div wraps focusable children.
   * Shows outline when any descendant is focused.
   */
  .focus-within-ring:focus-within {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
  }

  /* Destructive focus-within ring for error states */
  .focus-within-ring[aria-invalid="true"]:focus-within {
    outline-color: var(--destructive);
  }
}

/*
 * ============================================================================
 * GAME COMPONENT ANIMATIONS
 * ============================================================================
 *
 * Animations specific to game components. All animations respect
 * prefers-reduced-motion via the @media query wrapper.
 *
 * Components using these:
 * - HeartsDisplay (components/game/hearts-display.tsx) — heart loss animation
 * - GameFeedbackOverlay (components/game/game-feedback-overlay.tsx) — flash animation
 *
 * Design Pattern:
 * Hearts follow the destructive button active/disabled pattern:
 * - Active (filled): full opacity
 * - Disabled (lost): 50% opacity
 *
 * The animation transitions a heart from "filled" to "lost" state
 * with a shake effect, ending at 50% opacity (not 0).
 *
 * Feedback Overlay:
 * Quick flash (400ms) for immediate visual feedback on correct/wrong answers.
 * - Quick fade in (0-20%)
 * - Hold at peak (20-60%)
 * - Fade out (60-100%)
 *
 */

@keyframes heart-loss {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  20% {
    transform: scale(1.2);
  }
  40% {
    transform: translateX(-4px) scale(1.1);
  }
  60% {
    transform: translateX(4px) scale(1.1);
  }
  80% {
    transform: translateX(-2px) scale(1.05);
    opacity: 0.7;
  }
  100% {
    /* End at 50% opacity (disabled state) - heart remains visible but dimmed */
    opacity: 0.5;
    transform: scale(1);
  }
}

@keyframes feedback-flash {
  0% {
    opacity: 0;
  }
  20% {
    /* Quick fade in */
    opacity: 1;
  }
  60% {
    /* Hold at peak */
    opacity: 1;
  }
  100% {
    /* Fade out */
    opacity: 0;
  }
}

@layer utilities {
  .animate-heart-loss {
    animation: heart-loss 300ms ease-out forwards;
  }

  .animate-feedback-flash {
    animation: feedback-flash 400ms ease-out forwards;
  }
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .animate-heart-loss {
    animation: none;
    /* Immediately apply disabled state (50% opacity) */
    opacity: 0.5;
  }

  .animate-feedback-flash {
    animation: none;
    /* Show briefly then hide - no animation */
    opacity: 1;
  }
}

/*
 * ============================================================================
 * SONNER TOAST COMPONENT OVERRIDES
 * ============================================================================
 *
 * Sonner toast styling customizations. These override Sonner's default styles
 * to align with PlayLexi's design system.
 *
 * ## Specificity Strategy
 *
 * Sonner's nested element styles use:
 *   [data-sonner-toast][data-styled='true'] [data-description] → specificity (0,3,0)
 *
 * To override without !important, we add 'playlexi-toast' class via
 * toastOptions.classNames.toast in sonner.tsx, giving us:
 *
 *   [data-sonner-toast].playlexi-toast[data-styled='true'] [data-description] → (0,4,0)
 *
 * This naturally wins the cascade without hacks.
 *
 * ## Sonner's Internal Structure
 *
 * - [data-sonner-toast] - Main toast container (flex row)
 * - [data-icon] - Icon container (16px, flex-shrink-0)
 * - [data-content] - Content wrapper (flex column containing title + description)
 * - [data-title] - Toast title text
 * - [data-description] - Toast description text (optional)
 *
 * @see components/ui/sonner.tsx for the Toaster component
 * @see https://sonner.emilkowal.ski for Sonner documentation
 */

/*
 * Toast container layout overrides.
 *
 * Sonner's default: align-items: center (icon centered vertically in toast)
 * PlayLexi override: align-items: flex-start (icon aligned with title)
 *
 * This ensures that when a description is present, the icon stays aligned
 * with the title text rather than floating between title and description.
 */
[data-sonner-toast].playlexi-toast[data-styled="true"] {
  align-items: flex-start;
  border-color: var(--border);
}

/*
 * Toast title styling.
 */
[data-sonner-toast].playlexi-toast[data-styled="true"] [data-title] {
  color: var(--foreground);
  font-weight: 500;
}

/*
 * Toast description - uses Sonner's default #3f3f3f.
 *
 * We don't override this because Sonner's default provides good hierarchy:
 * lighter than title but still readable. Our tokens don't have an equivalent.
 */

/*
 * Icon vertical alignment fine-tuning.
 *
 * With align-items: flex-start, the icon aligns to the top of the content.
 * We add a small margin to vertically center it with the title text:
 *
 * - Title line height: ~20px (14px font × 1.4 line-height)
 * - Icon height: 16px
 * - Offset needed: (20 - 16) / 2 = 2px
 */
[data-sonner-toast].playlexi-toast[data-styled="true"] [data-icon] {
  margin-top: 2px;
}

/*
 * Action button styling.
 *
 * Matches PlayLexi's button design system:
 * - Primary colors
 * - Pill shape (rounded-full)
 * - Medium font weight
 */
[data-sonner-toast].playlexi-toast[data-styled="true"] [data-button] {
  background-color: var(--primary);
  color: var(--primary-foreground);
  font-weight: 500;
  border-radius: 9999px;
  border: none;
}

/*
 * Cancel button styling.
 *
 * Uses muted colors for secondary action.
 */
[data-sonner-toast].playlexi-toast[data-styled="true"] [data-cancel] {
  background-color: var(--muted);
  color: var(--muted-foreground);
  font-weight: 500;
  border-radius: 9999px;
  border: none;
}